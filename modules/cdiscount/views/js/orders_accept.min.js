$(document).ready(function(){var a=parseInt($("#cdiscount-debug").val());$("#accept-orders").click(function(){var d=$("#accept-orders-url").val();var e=new Object();e.type="POST";e.url=d+"&callback=?";e.data=$("#accept-orders-form").serialize()+"&context_key="+$("input[name=context_key]").val();e.data_type="json";if(window.console){console.log("Import Orders");console.log("URL is :"+d)}$("#accept-loader").show();$("#accept-orders-result").html("").hide();$("#accept-orders-error").html("").hide();$("#accept_order_list").html("").hide();$("#accept-orders-success").hide();$("#console").html("").hide();$.ajax({type:e.type,url:e.url,data:e.data,dataType:e.data_type,success:function(f){$("#accept-loader").hide();$("#accept-orders-success").html("");if(window.console){console.log(f)}if(a&&typeof(f.stdout)!=="undefined"&&f.length){$("#console").append(f.stdout).show()}if(f.error){$("#accept-orders-result").hide();$("#accept-orders-hr").show();$("#accept-orders-error").show();$("#accept-orders-error").append(f.output);$("#accept-order").hide();$.each(f.errors,function(h,i){$("#accept-orders-error").append(i)});$.each(f.output,function(i,h){$("#accept-orders-result").append(h)})}else{$("#accept-orders-error").hide();$("#accept-orders-hr").show();$("#accept-orders-result").show();$.each(f.output,function(i,h){$("#accept-orders-result").append(h)});if(f.orders){$("#accept-table").show();$("#accept-order").show();$("#accept_order_list").show();$.each(f.orders,function(i,h){$("#accept_order_list").append(h)});if(f.clogistique){$('#menu-accept td[rel="clogistique"]').show()}if(f.multichannel){$('#menu-accept td[rel="multichannel"]').show()}var g=0;if(f.multichannel){g++}if(f.clogistique){g++}if(g){$('#menu-accept td[rel="order-container"]').attr("colspan",8+g)}$("#accept-legend").show();b()}}},error:function(f){$("#accept-loader").hide();$("#accept-orders-error").show();$("#accept-orders-error").html("AJAX Error<br><br>"+f.responseText);c(e,f,$("#accept-orders-error"));if(window.console){console.log(f)}}});return(false)});function c(d,f,e){if(window.console){console.log("Ajax Error");console.log(d);console.log(f)}e.show().html($("#serror").val());if(f.output){e.append("<br />"+f.output)}if(f.responseText){e.append("<br />"+f.responseText)}e.append("<hr />");e.append($("#sdebug").val()+":  ");e.append('<form method="'+d.type+'" action="'+d.url+"&debug=1&"+d.data+'" target="_blank"><input type="submit" class="button" id="send-debug" value="Execute in Debug Mode" /></form>')}function b(){$("#accept-order").unbind("click");$("#accept-order").click(function(d){url=$("#accept-order-url").val();order_list=$('input[name="selected_orders[]"]').serialize();if(window.console){console.log("Import Orders");console.log("URL is :"+url)}if(!order_list.length){alert($("#text-select-orders").val());return(false)}$("#accept-loader").show();$("#console").html("");if(window.console){console.log("Orders:"+order_list)}$.ajax({type:"POST",url:url+"&callback=?",data:$("#accept-orders-form").serialize()+"&context_key="+$("input[name=context_key]").val(),dataType:"json",success:function(e){$("#accept-orders-success").html("");$("#accept-orders-result").hide();$("#accept-orders-hr").hide();$("#accept-loader").hide();if(a&&e.stdout&&e.stdout.length){$("#console").append(e.stdout).show();console.log(e)}if(e.error){$("#accept-orders-hr").show();$("#accept-orders-error").show();$("#accept-order").hide();$.each(e.errors,function(f,g){$("#accept-orders-error").append(g)})}if(e.count){$("#accept-orders-success").show();$.each(e.output,function(g,f){$("#accept-orders-success").append(f)});$.each(e.orders,function(g,f){$("#o-"+g).attr("disabled",true)})}},error:function(e){$("#accept-loader").hide();$("#accept-orders-success").html("");$("#accept-orders-result").hide().html("");$("#accept-orders-error").html("");$("#order_list").hide().html("");$("#accept-loader").hide();$("#accept-orders-error").html("AJAX Error").show();if(window.console){console.log(e)}}})})}});