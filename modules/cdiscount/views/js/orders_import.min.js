$(document).ready(function(){$("#import-orders").click(function(){var c=parseInt($("#cdiscount-debug").val());var d=$("#import-orders-url").val();var e=new Object();e.type="POST";e.url=d+"&callback=?";e.data=$("#import-orders-form").serialize()+"&context_key="+$("input[name=context_key]").val();e.data_type="json";if(window.console){console.log("Import Orders");console.log("URL is :"+d)}$("#import-loader").show();$("#import-orders-result").html("").hide();$("#import-orders-error").html("").hide();$("#order_list").html("").hide();$("#console").html("");$.ajax({type:e.type,url:e.url,data:e.data,dataType:e.data_type,success:function(f){$("#import-loader").hide();$("#import-orders-success").html("").hide();if(window.console){console.log("Success");console.log(f)}if(c&&f.stdout&&f.stdout.length){$("#console").append(f.stdout).show()}if(f.error){$("#import-orders-error").show();$("#import-orders-error").append(f.output);$.each(f.errors,function(h,i){$("#import-orders-error").append(i)})}else{if(c&&f.stdout&&f.stdout.length){$("#console").append("<pre>"+f.stdout+"</pre>")}}if(f.orders){if(f.output&&!f.error){$("#import-orders-hr").show();$("#import-orders-result").show().html("")}$("#import-table").show().find(".select-all").attr("checked",false);$("#order_list").html("").show();$("#import-order").show();$.each(f.orders,function(i,h){if(window.console){console.log(i)}$("#order_list").append(h)});$.each(f.output,function(i,h){$("#import-orders-result").append(h)});if(f.clogistique){$('#conf-import td[rel="clogistique"]').show()}if(f.multichannel){$('#conf-import td[rel="multichannel"]').show()}var g=0;if(f.multichannel){g++}if(f.clogistique){g++}if(g){$('#conf-import td[rel="order-container"]').attr("colspan",8+g)}$("#import-legend").show();a()}},error:function(f){$("#import-loader").hide();$("#import-orders-error").show();$("#import-orders-error").html("AJAX Error");b(e,f,$("#import-orders-error"));if(window.console){console.log(f)}}});return(false)});function b(c,e,d){if(window.console){console.log("Ajax Error");console.log(c);console.log(e)}d.show().html($("#serror").val());if(e.output){d.append("<br />"+e.output)}if(e.responseText){d.append("<br />"+e.responseText)}d.append("<hr />");d.append($("#sdebug").val()+":  ");d.append('<form method="'+c.type+'" action="'+c.url+"&debug=1&"+c.data+'" target="_blank"><input type="submit" class="button" id="send-debug" value="Execute in Debug Mode" /></form>')}function a(){$("#import-order").unbind("click");$("#import-order").click(function(f){var d=$("#import-order-url").val();var e=new Object();var c=$('input[name="selected_orders[]"]').serialize();e.type="POST";e.url=d+"&context_key="+$("input[name=context_key]").val()+"&callback=?";e.data=$("#import-orders-form").serialize();e.data_type="json";$("#import-orders-error").html("").hide();if(window.console){console.log("Import Orders");console.log("URL is :"+d)}if(!c.length){alert($("#text-select-orders").val());return(false)}$("#import-loader").show();if(window.console){console.log("Orders:"+c)}$.ajax({type:e.type,url:e.url,data:e.data,dataType:e.data_type,success:function(g){$("#import-orders-success").html("").hide();$("#import-orders-result").hide();$("#import-orders-hr").hide();$("#import-loader").hide();if(g.error){$("#import-orders-error").show();$.each(g.errors,function(h,i){$("#import-orders-error").append(i)})}if(debug&&g.console&&g.console.length){$("#console").append(g.console)}if(g.count){$.each(g.output,function(i,h){$("#import-orders-success").append(h).show()});$.each(g.orders,function(i,h){$("#o-"+i).attr("disabled",true)})}},error:function(g){$("#import-loader").hide();$("#import-orders-success").html("").hide();$("#import-orders-result").hide().html("");$("#import-orders-error").html("");$("#import-loader").hide();$("#import-orders-error").html("AJAX Error").show();b(e,g,$("#import-orders-error"));if(window.console){console.log(g)}}})})}});